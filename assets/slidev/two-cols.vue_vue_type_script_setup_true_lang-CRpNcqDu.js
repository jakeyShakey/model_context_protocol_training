import{_ as I,a as E}from"../modules/unplugin-icons-BZrrsUoE.js";import{d as L,r as $,L as M,M as k,N as V,z as S,O as q,f as g,o as r,j as f,i as z,B as p,b,k as D,n as u,g as w}from"../modules/vue-BkUP77Ya.js";import{m as x,n as K,C as R,o as j,p as O}from"../index-IRYEfXWq.js";import{u as U}from"./context-C59KryDI.js";const W=["title"],Q=L({__name:"CodeBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},lines:{type:Boolean,default:x.lineNumbers},at:{type:[String,Number],default:"+1"},maxHeight:{type:String,default:void 0}},setup(d){const e=d,{$clicksContext:s}=U(),o=$(),h=K();M(()=>{s.unregister(h)}),k(()=>{var t;(t=o.value)==null||t.classList.toggle("slidev-code-line-numbers",e.lines)}),V(()=>{var i;if(!s||!((i=e.ranges)!=null&&i.length))return;const t=s.calculateSince(e.at,e.ranges.length-1);s.register(h,t);const l=S(()=>t?Math.max(0,s.current-t.start+1):R),a=S(()=>e.finally==="last"?e.ranges.at(-1):e.finally.toString());k(()=>{if(!o.value)return;let c=e.ranges[l.value]??a.value;const y=c==="hide";o.value.classList.toggle(j,y),y&&(c=e.ranges[l.value+1]??a.value);const v=o.value.querySelector(".shiki"),_=Array.from(v.querySelectorAll("code > .line")),A=_.length;if(O(c,A,e.startLine,n=>[_[n]]),e.maxHeight){const n=Array.from(v.querySelectorAll(".line.highlighted"));n.reduce((C,B)=>B.offsetHeight+C,0)>o.value.offsetHeight?n[0].scrollIntoView({behavior:"smooth",block:"start"}):n.length>0&&n[Math.round((n.length-1)/2)].scrollIntoView({behavior:"smooth",block:"center"})}})});const{copied:m,copy:H}=q();function N(){var l,a;const t=(a=(l=o.value)==null?void 0:l.querySelector(".slidev-code"))==null?void 0:a.textContent;t&&H(t)}return(t,l)=>{const a=I,i=E;return r(),g("div",{ref_key:"el",ref:o,class:u(["slidev-code-wrapper relative group",{"slidev-code-line-numbers":e.lines}]),style:D({"max-height":e.maxHeight,"overflow-y":e.maxHeight?"scroll":void 0,"--start":e.startLine})},[f(t.$slots,"default"),p(x).codeCopy?(r(),g("button",{key:0,class:"slidev-code-copy absolute top-0 right-0 transition opacity-0 group-hover:opacity-20 hover:!opacity-100",title:p(m)?"Copied":"Copy",onClick:l[0]||(l[0]=c=>N())},[p(m)?(r(),b(a,{key:0,class:"p-2 w-8 h-8"})):(r(),b(i,{key:1,class:"p-2 w-8 h-8"}))],8,W)):z("v-if",!0)],6)}}}),T=L({__name:"two-cols",props:{class:{type:String},layoutClass:{type:String}},setup(d){const e=d;return(s,o)=>(r(),g("div",{class:u(["slidev-layout two-columns w-full h-full grid grid-cols-2",e.layoutClass])},[w("div",{class:u(["col-left",e.class])},[f(s.$slots,"default")],2),w("div",{class:u(["col-right",e.class])},[f(s.$slots,"right")],2)],2))}});export{Q as _,T as a};
